---
layout: post
title: Python入门(下)
categories: Python
description: none
keywords: Python, 初学
---
## 函数

python 万物皆对象，Python 把函数也当成对象，可以从另一个函数中返回出来而去构建高阶函数，比如： 参数是函数、返回值是函数。

#### 1. 函数的定义

- 函数以`def`关键词开头，后接函数名和圆括号()。
- 函数执行的代码以冒号起始，并且缩进。

- return [表达式] 结束函数，选择性地返回一个值给调用方。不带表达式的return相当于返回`None`。

> def function_name (parameters):
>     "函数_文档字符串"
>     function_suite
>     return [expression]

```python
def printme(str):
    print(str)
    
temp = printme('hello') # hello
print(temp)  # None
```

#### 2. 形参与实参

```python
def MyFirstFunction(name):
    "函数定义过程中name是形参"
    # 因为Ta只是一个形式，表示占据一个参数位置
    print('传递进来的{0}叫做实参，因为Ta是具体的参数值！'.format(name))
```

#### 3. 函数的参数

- 位置参数 (positional argument)
- 默认参数 (default argument)
- 可变参数 (variable argument)
- 关键字参数 (keyword argument)
- 命名关键字参数 (name keyword argument)

警告：虽然可以组合多达 5 种参数，但不要同时使用太多的组合，否则函数很难懂。

```python
def function_01(arg1,arg2=4,*args,**arg4):
    pass

def printinfo(arg1, *, nkw, **kwargs):
    pass
```

#### 4. 函数的返回值

```python
def add(a, b):
    return a + b

print(add([1, 2, 3], [4, 5, 6]))  # [1, 2, 3, 4, 5, 6]
# 别忘了，列表也可以作为参数哦，可以当作a，和b为java中的强制类型list
```

就算没有返回值

```python
def printme(str):
    print(str)

temp = printme('hello') # hello
print(temp) # None,没有返回值也不会报错哦，默认返回一个None；和Java不一样
```

#### 5. 变量的作用域

python在正常情况下，作用域和`java`类似，但是不同的是，内部作用域可以使用关键字修改外部作用域。

- 当内部作用域想修改外部作用域的变量时，就要用到`global`和`nonlocal`关键字了。

【例】

```python
num = 3

def set_num():
    num = 4
    print(num) # 4

set_num() 
print(num) # 3
# 以上代码输出了4和3.我们在方法中试图改变num的值，但是外部的值并没有发生变化
# 可以将其理解为，在方法中定义了一个新的变量num，对外部的变量没有任何影响
# 将以上代码进行修改：
num = 3

def set_num():
    global num # 声明使用外部的全局变量
    num = 4
    print(num) # 4

set_num() 
print(num) # 4
```

**闭包**

- 是函数式编程的一个重要的语法结构，是一种特殊的内嵌函数。
- 如果在一个内部函数里对外层非全局作用域的变量进行引用，那么内部函数就被认为是闭包。

```python
def funX(x):
    def funY(y):
        return x * y

    return funY


i = funX(8) # 返回的是一个内部函数，可以将i视为函数funY;i()视为funY()
print(type(i))  # <class 'function'>/
print(i(5))  # 40
```

【例子】 如果要修改闭包作用域中的变量则需要 `nonlocal` 关键字

```python
def outer():
    num = 10

    def inner():
        nonlocal num  # nonlocal关键字声明
        # 如果不加关键字，那么相当于在内部函数中声明一个新的变量num
        num = 100
        print(num)

    inner()
    print(num)


outer()

# 100
# 100
```

- 如果一个函数在内部调用自身本身，这个函数就是递归函数。

【例子】`n! = 1 x 2 x 3 x ... x n`

```python
# 利用循环
n = 1
for k in range(2, 6):
    n = n * k
print(n)  # 120

# 利用递归
def factorial(n):
    if n == 1:
        return 1
    return n * factorial(n - 1)


print(factorial(5)) # 120
```

【例子】斐波那契数列 `f(n)=f(n-1)+f(n-2), f(0)=0 f(1)=1`

```python
# 利用循环
i = 0
j = 1
lst = list([i, j])
for k in range(2, 11):
    k = i + j
    lst.append(k)
    i = j
    j = k
print(lst)  
# [0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55]

# 利用递归
def recur_fibo(n):
    if n <= 1:
        return n
    return recur_fibo(n - 1) + recur_fibo(n - 2)


lst = list()
for k in range(11):
    lst.append(recur_fibo(k))
print(lst)  
# [0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55]
```

【例子】设置递归的层数，Python默认递归层数为 100

```python
import sys

sys.setrecursionlimit(1000)
```



## Lambda表达式



#### 1. 匿名函数的定义

Python中有两类函数

* 第一类：用def关键字定义的正规函数
* 第二类：用lambda关键字定义的匿名函数

Python 使用 `lambda` 关键词来创建匿名函数，它没有函数名，其语法结构如下：

> lambda argument_list: expression

注意：

- `expression` 中没有 return 语句，因为 lambda 不需要它来返回，表达式本身结果就是返回值。
- 匿名函数拥有自己的命名空间，且不能访问自己参数列表之外或全局命名空间里的参数。

【例】

```python
function01 = lambda x: x ** 2
# 定义一个匿名函数，返回当前值的平方
y = [function01(x) for x in range(10)]
print(y) # [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]

fun02 = lambda arg1, arg2 : arg1 + arg2

fun03 = lambda *args : sum(args)
```

#### 匿名函数的应用

匿名函数 常常应用于函数式编程的高阶函数 (high-order function)中，主要有两种形式：

- 参数是函数 (filter, map)
- 返回值是函数 (closure)

`filter(function, iterable)` 过滤序列，过滤掉不符合条件的元素，返回一个迭代器对象

```python
odd = lambda x: x % 2 == 1
templist = filter(odd, [1, 2, 3, 4, 5, 6, 7, 8, 9])
print(list(templist))  # [1, 3, 5, 7, 9]
```

